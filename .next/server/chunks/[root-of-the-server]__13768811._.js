module.exports = {
  "[project]/.next-internal/server/app/api/boards/[boardId]/route/actions.js [app-rsc] (server actions loader, ecmascript)":
    (__turbopack_context__) => {
      "use strict";

      var { g: global, __dirname } = __turbopack_context__;
      {
        __turbopack_context__.s({});
      }
    },
  "[externals]/next/dist/compiled/next-server/app-route-turbo.runtime.dev.js [external] (next/dist/compiled/next-server/app-route-turbo.runtime.dev.js, cjs)":
    function (__turbopack_context__) {
      var {
        g: global,
        __dirname,
        m: module,
        e: exports,
      } = __turbopack_context__;
      {
        const mod = __turbopack_context__.x(
          "next/dist/compiled/next-server/app-route-turbo.runtime.dev.js",
          () =>
            require("next/dist/compiled/next-server/app-route-turbo.runtime.dev.js"),
        );

        module.exports = mod;
      }
    },
  "[externals]/next/dist/compiled/@opentelemetry/api [external] (next/dist/compiled/@opentelemetry/api, cjs)":
    function (__turbopack_context__) {
      var {
        g: global,
        __dirname,
        m: module,
        e: exports,
      } = __turbopack_context__;
      {
        const mod = __turbopack_context__.x(
          "next/dist/compiled/@opentelemetry/api",
          () => require("next/dist/compiled/@opentelemetry/api"),
        );

        module.exports = mod;
      }
    },
  "[externals]/next/dist/compiled/next-server/app-page-turbo.runtime.dev.js [external] (next/dist/compiled/next-server/app-page-turbo.runtime.dev.js, cjs)":
    function (__turbopack_context__) {
      var {
        g: global,
        __dirname,
        m: module,
        e: exports,
      } = __turbopack_context__;
      {
        const mod = __turbopack_context__.x(
          "next/dist/compiled/next-server/app-page-turbo.runtime.dev.js",
          () =>
            require("next/dist/compiled/next-server/app-page-turbo.runtime.dev.js"),
        );

        module.exports = mod;
      }
    },
  "[externals]/next/dist/server/app-render/work-unit-async-storage.external.js [external] (next/dist/server/app-render/work-unit-async-storage.external.js, cjs)":
    function (__turbopack_context__) {
      var {
        g: global,
        __dirname,
        m: module,
        e: exports,
      } = __turbopack_context__;
      {
        const mod = __turbopack_context__.x(
          "next/dist/server/app-render/work-unit-async-storage.external.js",
          () =>
            require("next/dist/server/app-render/work-unit-async-storage.external.js"),
        );

        module.exports = mod;
      }
    },
  "[externals]/next/dist/server/app-render/work-async-storage.external.js [external] (next/dist/server/app-render/work-async-storage.external.js, cjs)":
    function (__turbopack_context__) {
      var {
        g: global,
        __dirname,
        m: module,
        e: exports,
      } = __turbopack_context__;
      {
        const mod = __turbopack_context__.x(
          "next/dist/server/app-render/work-async-storage.external.js",
          () =>
            require("next/dist/server/app-render/work-async-storage.external.js"),
        );

        module.exports = mod;
      }
    },
  "[externals]/next/dist/server/app-render/after-task-async-storage.external.js [external] (next/dist/server/app-render/after-task-async-storage.external.js, cjs)":
    function (__turbopack_context__) {
      var {
        g: global,
        __dirname,
        m: module,
        e: exports,
      } = __turbopack_context__;
      {
        const mod = __turbopack_context__.x(
          "next/dist/server/app-render/after-task-async-storage.external.js",
          () =>
            require("next/dist/server/app-render/after-task-async-storage.external.js"),
        );

        module.exports = mod;
      }
    },
  "[externals]/mongoose [external] (mongoose, cjs)": function (
    __turbopack_context__,
  ) {
    var { g: global, __dirname, m: module, e: exports } = __turbopack_context__;
    {
      const mod = __turbopack_context__.x("mongoose", () =>
        require("mongoose"),
      );

      module.exports = mod;
    }
  },
  "[project]/src/libs/db/mongoose.ts [app-route] (ecmascript)": (
    __turbopack_context__,
  ) => {
    "use strict";

    var { g: global, __dirname } = __turbopack_context__;
    {
      /* __next_internal_action_entry_do_not_use__ [{"000bf0421e7fcc01c4bc85f0d4c70331e19a1ec9df":"connectDB"},"",""] */ __turbopack_context__.s(
        {
          connectDB: () => connectDB,
        },
      );
      var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$build$2f$webpack$2f$loaders$2f$next$2d$flight$2d$loader$2f$server$2d$reference$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ =
        __turbopack_context__.i(
          "[project]/node_modules/next/dist/build/webpack/loaders/next-flight-loader/server-reference.js [app-route] (ecmascript)",
        );
      var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$app$2d$render$2f$encryption$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ =
        __turbopack_context__.i(
          "[project]/node_modules/next/dist/server/app-render/encryption.js [app-route] (ecmascript)",
        );
      var __TURBOPACK__imported__module__$5b$externals$5d2f$mongoose__$5b$external$5d$__$28$mongoose$2c$__cjs$29$__ =
        __turbopack_context__.i(
          "[externals]/mongoose [external] (mongoose, cjs)",
        );
      var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$build$2f$webpack$2f$loaders$2f$next$2d$flight$2d$loader$2f$action$2d$validate$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ =
        __turbopack_context__.i(
          "[project]/node_modules/next/dist/build/webpack/loaders/next-flight-loader/action-validate.js [app-route] (ecmascript)",
        );
      const MONGO_URI = process.env.MONGO_URI;
      if (!MONGO_URI) {
        throw new Error(
          "Please define the MONGODB_URI environment variable inside .env.local",
        );
      }
      global.mongooseCache = global.mongooseCache || {
        conn: null,
        promise: null,
      };
      async function connectDB() {
        if (global.mongooseCache.conn) {
          return global.mongooseCache.conn;
        }
        if (!global.mongooseCache.promise) {
          global.mongooseCache.promise = (0,
          __TURBOPACK__imported__module__$5b$externals$5d2f$mongoose__$5b$external$5d$__$28$mongoose$2c$__cjs$29$__[
            "connect"
          ])(MONGO_URI).then();
        }
        global.mongooseCache.conn = await global.mongooseCache.promise;
        return global.mongooseCache.conn;
      }
      (0,
      __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$build$2f$webpack$2f$loaders$2f$next$2d$flight$2d$loader$2f$action$2d$validate$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__[
        "ensureServerEntryExports"
      ])([connectDB]);
      (0,
      __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$build$2f$webpack$2f$loaders$2f$next$2d$flight$2d$loader$2f$server$2d$reference$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__[
        "registerServerReference"
      ])(connectDB, "000bf0421e7fcc01c4bc85f0d4c70331e19a1ec9df", null);
    }
  },
  "[project]/src/libs/db/models/BoardModel.ts [app-route] (ecmascript)": (
    __turbopack_context__,
  ) => {
    "use strict";

    var { g: global, __dirname } = __turbopack_context__;
    {
      __turbopack_context__.s({
        BoardModel: () => BoardModel,
      });
      var __TURBOPACK__imported__module__$5b$externals$5d2f$mongoose__$5b$external$5d$__$28$mongoose$2c$__cjs$29$__ =
        __turbopack_context__.i(
          "[externals]/mongoose [external] (mongoose, cjs)",
        );
      const BoardSchema =
        new __TURBOPACK__imported__module__$5b$externals$5d2f$mongoose__$5b$external$5d$__$28$mongoose$2c$__cjs$29$__[
          "Schema"
        ](
          {
            name: {
              type: String,
              required: true,
            },
            user: {
              type: __TURBOPACK__imported__module__$5b$externals$5d2f$mongoose__$5b$external$5d$__$28$mongoose$2c$__cjs$29$__[
                "Schema"
              ].Types.ObjectId,
              ref: "User",
            },
          },
          {
            timestamps: true,
          },
        );
      const BoardModel =
        __TURBOPACK__imported__module__$5b$externals$5d2f$mongoose__$5b$external$5d$__$28$mongoose$2c$__cjs$29$__[
          "models"
        ]?.Board ||
        (0,
        __TURBOPACK__imported__module__$5b$externals$5d2f$mongoose__$5b$external$5d$__$28$mongoose$2c$__cjs$29$__[
          "model"
        ])("Board", BoardSchema);
    }
  },
  "[project]/src/libs/db/models/ListModel.ts [app-route] (ecmascript)": (
    __turbopack_context__,
  ) => {
    "use strict";

    var { g: global, __dirname } = __turbopack_context__;
    {
      __turbopack_context__.s({
        ListModel: () => ListModel,
      });
      var __TURBOPACK__imported__module__$5b$externals$5d2f$mongoose__$5b$external$5d$__$28$mongoose$2c$__cjs$29$__ =
        __turbopack_context__.i(
          "[externals]/mongoose [external] (mongoose, cjs)",
        );
      const ListSchema =
        new __TURBOPACK__imported__module__$5b$externals$5d2f$mongoose__$5b$external$5d$__$28$mongoose$2c$__cjs$29$__[
          "Schema"
        ](
          {
            name: {
              type: String,
              required: true,
            },
            board: {
              type: __TURBOPACK__imported__module__$5b$externals$5d2f$mongoose__$5b$external$5d$__$28$mongoose$2c$__cjs$29$__[
                "Schema"
              ].Types.ObjectId,
              ref: "Board",
            },
            position: {
              type: Number,
              required: true,
            },
          },
          {
            timestamps: true,
          },
        );
      const ListModel =
        __TURBOPACK__imported__module__$5b$externals$5d2f$mongoose__$5b$external$5d$__$28$mongoose$2c$__cjs$29$__[
          "models"
        ]?.List ||
        (0,
        __TURBOPACK__imported__module__$5b$externals$5d2f$mongoose__$5b$external$5d$__$28$mongoose$2c$__cjs$29$__[
          "model"
        ])("List", ListSchema);
    }
  },
  "[project]/src/libs/db/models/CardModel.ts [app-route] (ecmascript)": (
    __turbopack_context__,
  ) => {
    "use strict";

    var { g: global, __dirname } = __turbopack_context__;
    {
      __turbopack_context__.s({
        CardModel: () => CardModel,
      });
      var __TURBOPACK__imported__module__$5b$externals$5d2f$mongoose__$5b$external$5d$__$28$mongoose$2c$__cjs$29$__ =
        __turbopack_context__.i(
          "[externals]/mongoose [external] (mongoose, cjs)",
        );
      const CardSchema =
        new __TURBOPACK__imported__module__$5b$externals$5d2f$mongoose__$5b$external$5d$__$28$mongoose$2c$__cjs$29$__[
          "Schema"
        ](
          {
            name: {
              type: String,
              required: true,
            },
            description: {
              type: String,
            },
            list: {
              type: __TURBOPACK__imported__module__$5b$externals$5d2f$mongoose__$5b$external$5d$__$28$mongoose$2c$__cjs$29$__[
                "Schema"
              ].Types.ObjectId,
              ref: "List",
            },
            position: {
              type: Number,
              required: true,
            },
          },
          {
            timestamps: true,
          },
        );
      const CardModel =
        __TURBOPACK__imported__module__$5b$externals$5d2f$mongoose__$5b$external$5d$__$28$mongoose$2c$__cjs$29$__[
          "models"
        ]?.Card ||
        (0,
        __TURBOPACK__imported__module__$5b$externals$5d2f$mongoose__$5b$external$5d$__$28$mongoose$2c$__cjs$29$__[
          "model"
        ])("Card", CardSchema);
    }
  },
  "[project]/src/app/api/boards/[boardId]/route.ts [app-route] (ecmascript)": (
    __turbopack_context__,
  ) => {
    "use strict";

    var { g: global, __dirname } = __turbopack_context__;
    {
      __turbopack_context__.s({
        DELETE: () => DELETE,
        GET: () => GET,
        PUT: () => PUT,
      });
      var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$server$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ =
        __turbopack_context__.i(
          "[project]/node_modules/next/server.js [app-route] (ecmascript)",
        );
      var __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$libs$2f$db$2f$mongoose$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__ =
        __turbopack_context__.i(
          "[project]/src/libs/db/mongoose.ts [app-route] (ecmascript)",
        );
      var __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$libs$2f$db$2f$models$2f$BoardModel$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__ =
        __turbopack_context__.i(
          "[project]/src/libs/db/models/BoardModel.ts [app-route] (ecmascript)",
        );
      var __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$libs$2f$db$2f$models$2f$ListModel$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__ =
        __turbopack_context__.i(
          "[project]/src/libs/db/models/ListModel.ts [app-route] (ecmascript)",
        );
      var __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$libs$2f$db$2f$models$2f$CardModel$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__ =
        __turbopack_context__.i(
          "[project]/src/libs/db/models/CardModel.ts [app-route] (ecmascript)",
        );
      async function GET(req, { params }) {
        await (0,
        __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$libs$2f$db$2f$mongoose$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__[
          "connectDB"
        ])();
        const board =
          await __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$libs$2f$db$2f$models$2f$BoardModel$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__[
            "BoardModel"
          ].findById(params.boardId);
        const lists =
          await __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$libs$2f$db$2f$models$2f$ListModel$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__[
            "ListModel"
          ]
            .find({
              board: params.boardId,
            })
            .sort({
              position: 1,
            });
        const listIds = lists.map((list) => list._id);
        const cards =
          await __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$libs$2f$db$2f$models$2f$CardModel$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__[
            "CardModel"
          ]
            .find({
              list: {
                $in: listIds,
              },
            })
            .sort({
              position: 1,
            });
        return __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$server$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__[
          "NextResponse"
        ].json({
          board,
          lists,
          cards,
        });
      }
      async function PUT(req, { params }) {
        await (0,
        __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$libs$2f$db$2f$mongoose$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__[
          "connectDB"
        ])();
        const { name } = await req.json();
        const board =
          await __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$libs$2f$db$2f$models$2f$BoardModel$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__[
            "BoardModel"
          ].findByIdAndUpdate(
            params.boardId,
            {
              name,
            },
            {
              new: true,
            },
          );
        return __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$server$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__[
          "NextResponse"
        ].json(board);
      }
      async function DELETE(req, { params }) {
        await (0,
        __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$libs$2f$db$2f$mongoose$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__[
          "connectDB"
        ])();
        const boardId = params.boardId;
        const lists =
          await __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$libs$2f$db$2f$models$2f$ListModel$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__[
            "ListModel"
          ].find({
            board: boardId,
          });
        const listIds = lists.map((list) => list._id);
        await __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$libs$2f$db$2f$models$2f$CardModel$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__[
          "CardModel"
        ].deleteMany({
          list: {
            $in: listIds,
          },
        });
        await __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$libs$2f$db$2f$models$2f$ListModel$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__[
          "ListModel"
        ].deleteMany({
          board: boardId,
        });
        await __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$libs$2f$db$2f$models$2f$BoardModel$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__[
          "BoardModel"
        ].findByIdAndDelete(boardId);
        return __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$server$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__[
          "NextResponse"
        ].json({
          message: "Board deleted",
        });
      }
    }
  },
};

//# sourceMappingURL=%5Broot-of-the-server%5D__13768811._.js.map
