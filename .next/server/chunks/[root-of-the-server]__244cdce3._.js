module.exports = {
  "[project]/.next-internal/server/app/api/users/login/route/actions.js [app-rsc] (server actions loader, ecmascript)":
    (__turbopack_context__) => {
      "use strict";

      var { g: global, __dirname } = __turbopack_context__;
      {
        __turbopack_context__.s({});
      }
    },
  "[externals]/next/dist/compiled/next-server/app-route-turbo.runtime.dev.js [external] (next/dist/compiled/next-server/app-route-turbo.runtime.dev.js, cjs)":
    function (__turbopack_context__) {
      var {
        g: global,
        __dirname,
        m: module,
        e: exports,
      } = __turbopack_context__;
      {
        const mod = __turbopack_context__.x(
          "next/dist/compiled/next-server/app-route-turbo.runtime.dev.js",
          () =>
            require("next/dist/compiled/next-server/app-route-turbo.runtime.dev.js"),
        );

        module.exports = mod;
      }
    },
  "[externals]/next/dist/compiled/@opentelemetry/api [external] (next/dist/compiled/@opentelemetry/api, cjs)":
    function (__turbopack_context__) {
      var {
        g: global,
        __dirname,
        m: module,
        e: exports,
      } = __turbopack_context__;
      {
        const mod = __turbopack_context__.x(
          "next/dist/compiled/@opentelemetry/api",
          () => require("next/dist/compiled/@opentelemetry/api"),
        );

        module.exports = mod;
      }
    },
  "[externals]/next/dist/compiled/next-server/app-page-turbo.runtime.dev.js [external] (next/dist/compiled/next-server/app-page-turbo.runtime.dev.js, cjs)":
    function (__turbopack_context__) {
      var {
        g: global,
        __dirname,
        m: module,
        e: exports,
      } = __turbopack_context__;
      {
        const mod = __turbopack_context__.x(
          "next/dist/compiled/next-server/app-page-turbo.runtime.dev.js",
          () =>
            require("next/dist/compiled/next-server/app-page-turbo.runtime.dev.js"),
        );

        module.exports = mod;
      }
    },
  "[externals]/next/dist/server/app-render/work-unit-async-storage.external.js [external] (next/dist/server/app-render/work-unit-async-storage.external.js, cjs)":
    function (__turbopack_context__) {
      var {
        g: global,
        __dirname,
        m: module,
        e: exports,
      } = __turbopack_context__;
      {
        const mod = __turbopack_context__.x(
          "next/dist/server/app-render/work-unit-async-storage.external.js",
          () =>
            require("next/dist/server/app-render/work-unit-async-storage.external.js"),
        );

        module.exports = mod;
      }
    },
  "[externals]/next/dist/server/app-render/work-async-storage.external.js [external] (next/dist/server/app-render/work-async-storage.external.js, cjs)":
    function (__turbopack_context__) {
      var {
        g: global,
        __dirname,
        m: module,
        e: exports,
      } = __turbopack_context__;
      {
        const mod = __turbopack_context__.x(
          "next/dist/server/app-render/work-async-storage.external.js",
          () =>
            require("next/dist/server/app-render/work-async-storage.external.js"),
        );

        module.exports = mod;
      }
    },
  "[externals]/next/dist/server/app-render/after-task-async-storage.external.js [external] (next/dist/server/app-render/after-task-async-storage.external.js, cjs)":
    function (__turbopack_context__) {
      var {
        g: global,
        __dirname,
        m: module,
        e: exports,
      } = __turbopack_context__;
      {
        const mod = __turbopack_context__.x(
          "next/dist/server/app-render/after-task-async-storage.external.js",
          () =>
            require("next/dist/server/app-render/after-task-async-storage.external.js"),
        );

        module.exports = mod;
      }
    },
  "[externals]/mongoose [external] (mongoose, cjs)": function (
    __turbopack_context__,
  ) {
    var { g: global, __dirname, m: module, e: exports } = __turbopack_context__;
    {
      const mod = __turbopack_context__.x("mongoose", () =>
        require("mongoose"),
      );

      module.exports = mod;
    }
  },
  "[project]/src/libs/db/mongoose.ts [app-route] (ecmascript)": (
    __turbopack_context__,
  ) => {
    "use strict";

    var { g: global, __dirname } = __turbopack_context__;
    {
      /* __next_internal_action_entry_do_not_use__ [{"000bf0421e7fcc01c4bc85f0d4c70331e19a1ec9df":"connectDB"},"",""] */ __turbopack_context__.s(
        {
          connectDB: () => connectDB,
        },
      );
      var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$build$2f$webpack$2f$loaders$2f$next$2d$flight$2d$loader$2f$server$2d$reference$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ =
        __turbopack_context__.i(
          "[project]/node_modules/next/dist/build/webpack/loaders/next-flight-loader/server-reference.js [app-route] (ecmascript)",
        );
      var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$app$2d$render$2f$encryption$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ =
        __turbopack_context__.i(
          "[project]/node_modules/next/dist/server/app-render/encryption.js [app-route] (ecmascript)",
        );
      var __TURBOPACK__imported__module__$5b$externals$5d2f$mongoose__$5b$external$5d$__$28$mongoose$2c$__cjs$29$__ =
        __turbopack_context__.i(
          "[externals]/mongoose [external] (mongoose, cjs)",
        );
      var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$build$2f$webpack$2f$loaders$2f$next$2d$flight$2d$loader$2f$action$2d$validate$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ =
        __turbopack_context__.i(
          "[project]/node_modules/next/dist/build/webpack/loaders/next-flight-loader/action-validate.js [app-route] (ecmascript)",
        );
      const MONGO_URI = process.env.MONGO_URI;
      if (!MONGO_URI) {
        throw new Error(
          "Please define the MONGODB_URI environment variable inside .env.local",
        );
      }
      global.mongooseCache = global.mongooseCache || {
        conn: null,
        promise: null,
      };
      async function connectDB() {
        if (global.mongooseCache.conn) {
          return global.mongooseCache.conn;
        }
        if (!global.mongooseCache.promise) {
          global.mongooseCache.promise = (0,
          __TURBOPACK__imported__module__$5b$externals$5d2f$mongoose__$5b$external$5d$__$28$mongoose$2c$__cjs$29$__[
            "connect"
          ])(MONGO_URI).then();
        }
        global.mongooseCache.conn = await global.mongooseCache.promise;
        return global.mongooseCache.conn;
      }
      (0,
      __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$build$2f$webpack$2f$loaders$2f$next$2d$flight$2d$loader$2f$action$2d$validate$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__[
        "ensureServerEntryExports"
      ])([connectDB]);
      (0,
      __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$build$2f$webpack$2f$loaders$2f$next$2d$flight$2d$loader$2f$server$2d$reference$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__[
        "registerServerReference"
      ])(connectDB, "000bf0421e7fcc01c4bc85f0d4c70331e19a1ec9df", null);
    }
  },
  "[project]/src/libs/db/models/UserModel.ts [app-route] (ecmascript)": (
    __turbopack_context__,
  ) => {
    "use strict";

    var { g: global, __dirname } = __turbopack_context__;
    {
      __turbopack_context__.s({
        UserModel: () => UserModel,
      });
      var __TURBOPACK__imported__module__$5b$externals$5d2f$mongoose__$5b$external$5d$__$28$mongoose$2c$__cjs$29$__ =
        __turbopack_context__.i(
          "[externals]/mongoose [external] (mongoose, cjs)",
        );
      const UserSchema =
        new __TURBOPACK__imported__module__$5b$externals$5d2f$mongoose__$5b$external$5d$__$28$mongoose$2c$__cjs$29$__[
          "Schema"
        ](
          {
            name: {
              type: String,
            },
            email: {
              type: String,
              required: true,
              unique: true,
            },
            password: {
              type: String,
              required: true,
            },
          },
          {
            timestamps: true,
          },
        );
      const UserModel =
        __TURBOPACK__imported__module__$5b$externals$5d2f$mongoose__$5b$external$5d$__$28$mongoose$2c$__cjs$29$__[
          "models"
        ]?.User ||
        (0,
        __TURBOPACK__imported__module__$5b$externals$5d2f$mongoose__$5b$external$5d$__$28$mongoose$2c$__cjs$29$__[
          "model"
        ])("User", UserSchema);
    }
  },
  "[externals]/bcrypt [external] (bcrypt, cjs)": function (
    __turbopack_context__,
  ) {
    var { g: global, __dirname, m: module, e: exports } = __turbopack_context__;
    {
      const mod = __turbopack_context__.x("bcrypt", () => require("bcrypt"));

      module.exports = mod;
    }
  },
  "[externals]/buffer [external] (buffer, cjs)": function (
    __turbopack_context__,
  ) {
    var { g: global, __dirname, m: module, e: exports } = __turbopack_context__;
    {
      const mod = __turbopack_context__.x("buffer", () => require("buffer"));

      module.exports = mod;
    }
  },
  "[externals]/stream [external] (stream, cjs)": function (
    __turbopack_context__,
  ) {
    var { g: global, __dirname, m: module, e: exports } = __turbopack_context__;
    {
      const mod = __turbopack_context__.x("stream", () => require("stream"));

      module.exports = mod;
    }
  },
  "[externals]/util [external] (util, cjs)": function (__turbopack_context__) {
    var { g: global, __dirname, m: module, e: exports } = __turbopack_context__;
    {
      const mod = __turbopack_context__.x("util", () => require("util"));

      module.exports = mod;
    }
  },
  "[externals]/crypto [external] (crypto, cjs)": function (
    __turbopack_context__,
  ) {
    var { g: global, __dirname, m: module, e: exports } = __turbopack_context__;
    {
      const mod = __turbopack_context__.x("crypto", () => require("crypto"));

      module.exports = mod;
    }
  },
  "[project]/src/app/api/users/login/route.ts [app-route] (ecmascript)": (
    __turbopack_context__,
  ) => {
    "use strict";

    var { g: global, __dirname } = __turbopack_context__;
    {
      __turbopack_context__.s({
        POST: () => POST,
      });
      var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$server$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ =
        __turbopack_context__.i(
          "[project]/node_modules/next/server.js [app-route] (ecmascript)",
        );
      var __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$libs$2f$db$2f$mongoose$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__ =
        __turbopack_context__.i(
          "[project]/src/libs/db/mongoose.ts [app-route] (ecmascript)",
        );
      var __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$libs$2f$db$2f$models$2f$UserModel$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__ =
        __turbopack_context__.i(
          "[project]/src/libs/db/models/UserModel.ts [app-route] (ecmascript)",
        );
      var __TURBOPACK__imported__module__$5b$externals$5d2f$bcrypt__$5b$external$5d$__$28$bcrypt$2c$__cjs$29$__ =
        __turbopack_context__.i("[externals]/bcrypt [external] (bcrypt, cjs)");
      var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$jsonwebtoken$2f$index$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ =
        __turbopack_context__.i(
          "[project]/node_modules/jsonwebtoken/index.js [app-route] (ecmascript)",
        );
      async function POST(req) {
        await (0,
        __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$libs$2f$db$2f$mongoose$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__[
          "connectDB"
        ])();
        const { email, password } = await req.json();
        if (!email || !password) {
          return __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$server$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__[
            "NextResponse"
          ].json(
            {
              message: "Email and password are required",
            },
            {
              status: 400,
            },
          );
        }
        const user =
          await __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$libs$2f$db$2f$models$2f$UserModel$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__[
            "UserModel"
          ].findOne({
            email,
          });
        if (!user) {
          return __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$server$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__[
            "NextResponse"
          ].json(
            {
              message: "Invalid credentials",
            },
            {
              status: 401,
            },
          );
        }
        const isPasswordValid =
          await __TURBOPACK__imported__module__$5b$externals$5d2f$bcrypt__$5b$external$5d$__$28$bcrypt$2c$__cjs$29$__[
            "default"
          ].compare(password, user.password);
        if (!isPasswordValid) {
          return __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$server$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__[
            "NextResponse"
          ].json(
            {
              message: "Invalid credentials",
            },
            {
              status: 401,
            },
          );
        }
        const token =
          __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$jsonwebtoken$2f$index$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__[
            "default"
          ].sign(
            {
              userId: user._id,
            },
            process.env.JWT_SECRET,
            {
              expiresIn: "1d",
            },
          );
        return __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$server$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__[
          "NextResponse"
        ].json({
          token,
          user: {
            name: user.name,
            email: user.email,
          },
        });
      }
    }
  },
};

//# sourceMappingURL=%5Broot-of-the-server%5D__244cdce3._.js.map
